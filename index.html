<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <link rel="stylesheet" href="style.css">

    
    <title>Document</title>
</head>
<body>

    <div class="dashboard"> 
        <h1>DASHBOARD</h1>
        <h2>SENSOR VALUES AND READINGS</h2>
    </div>

    <div class="grid-container">
        <div class="grid-item"><h3>NITROGEN (N)<br>
           <div id='d1'></div></h3></div>
        <div class="grid-item"><h3>PHOSPOROUS (P) <br>
           <div id='d2'></div></h3></div>
        <div class="grid-item"><h3>POTASSIUM (K) <br>
           <div id='d3'></div> </h3></div>  
        <div class="grid-item"><h3>SOIL MOISTURE <br>
           <div id='d4'></div> </h3></div>
        <div class="grid-item"><h3>pH VALUE <br>
           <div id='d5'></div></h3></div>
    </div>  

    
    <div class="points" >
        <canvas id="myChart" style="width:100%;max-width:1000px; height: 500px;"></canvas>

        <div style="float: right; padding-right: 200px; margin-top: -300px;">

        <h5 style="color: white;">NITROGEN (N)</h5>
        <h5 style="color: red;">PHOSPOROUS (P)</h5>
        <h5 style="color: green;">POTASSIUM (K)</h5>
        <h5 style="color: blue;">SOIL MOISTURE</h5>
        <h5 style="color: yellow;">pH VALUE</h5>
        </div>

        
    </div>

    <div class="table-responsive col-md-6" style="float:left;padding: 50px;">
      
      <table class="table table-bordered" style="color:white;">
        <tr style="text-align: center; background-color: rgb(93, 214, 231); color: black;">
          
          <td colspan="6">MULTIPLE SENSOR READINGS & VALUES</td>
          
        </tr>
        <thead>
          <tbody>

          <tr>
            <th class="col-md-1"> </th>
            <th class="col-md-2">N</th>
            <th class="col-md-3">P</th>
            <th class="col-md-3">K</th>
            <th class="col-md-3">SOIL MOISTURE</th>
            <th class="col-md-3">pH</th>
         </tr>
        
        
          <tr>
            <td class="col-md-1">R1</td>
            <td class="col-md-2" id="r1_1"></td>
            <td class="col-md-3" id="r1_2"></td>
            <td class="col-md-3" id="r1_3"></td>
            <td class="col-md-3" id="r1_4"></td>
            <td class="col-md-3" id="r1_5"></td>

          </tr>
          <tr>
            <td class="col-md-1" >R2</td>
            <td class="col-md-2" id="r2_1"></td>
            <td class="col-md-3" id="r2_2"></td>
            <td class="col-md-3" id="r2_3"></td>
            <td class="col-md-3" id="r2_4"></td>
            <td class="col-md-3" id="r2_5"></td>

          </tr>
          <tr>
            <td class="col-md-1" >R3</td>
            <td class="col-md-2" id="r3_1"></td>
            <td class="col-md-3" id="r3_2"></td>
            <td class="col-md-3" id="r3_3"></td>
            <td class="col-md-3" id="r3_4"></td>
            <td class="col-md-3" id="r3_5"></td>

            
          </tr>
          <tr>
            <td class="col-md-1" >R4</td>
            <td class="col-md-2" id="r4_1"></td>
            <td class="col-md-3" id="r4_2"></td>
            <td class="col-md-3" id="r4_3"></td>
            <td class="col-md-3" id="r4_4"></td>
            <td class="col-md-3" id="r4_5"></td>

          </tr>
           <tr>
            <td class="col-md-1" >AVG</td>
            <td class="col-md-2" id="ra_1"></td>
            <td class="col-md-3" id="ra_2"></td>
            <td class="col-md-3" id="ra_3"></td>
            <td class="col-md-3" id="ra_4"></td>
            <td class="col-md-3" id="ra_5"></td>
          </tr>
          
        </tbody>
      </table>
      <button onClick="display()"  id="next" class="btn btn-warning" style="width: 325px;">NEXT READING</button>
      
      <button class="btn btn-warning" style="width: 325px;" onclick="avg()";>CALCULATE AVERAGE</button>

      
       
    </div>
    
    <div class="table-responsive col-md-6" style="float:right;padding: 50px;">
  
      
      
      <table class="table table-bordered " style="padding: 35px; height: 85%; color:white;">
        <tr style="text-align: center; background-color: rgb(93, 214, 231); color: black;">          
        <td colspan="3">CROP SUGGESTION</td>          
        </tr>
              
      </table>

      <div id="myDIV">
        <a href="#"><button class="btn btn-dark"><p style="width: 185px; margin-top: 3px;">ASPARAGUS</p></button></a>
        <a href="bean.html"><button class="btn btn-dark child"><p style="width: 185px; margin-top: 3px;">BUTTER BEAN</p></button></a>
        <a href="#"><button class="btn btn-dark "><p style="width: 185px; margin-top: 3px;">CELERY</p></button>
        <a href="crop.html"><button class="btn btn-dark child"><p style="width: 185px; margin-top: 3px;">LETTUCE</p></button>
        <a href="#"><button class="btn btn-dark "><p style="width: 185px; margin-top: 3px;">TURNIP</p></button>
        <a href="#"><button class="btn btn-dark "><p  style="width: 185px; margin-top: 3px;">PALAK</p></button></a>
        <a href="crop.html"><button class="btn btn-dark child"><p  style="width: 185px; margin-top: 3px;">WATERMELON</p></button></a>
        <a href="#"><button class="btn btn-dark "><p  style="width: 185px; margin-top: 3px;">ELEPHANT YAM</p></button></a>
        <a href="#"><button class="btn btn-dark "><p  style="width: 185px; margin-top: 3px;">GARLIC</p></button></a>
      </div>

          <button class="btn btn-warning" style="width: 660px; margin-top: 20px;" onclick="myFunction()";> SUGGEST CROPS</button>
          <script>
      function myFunction() {
        const element = document.getElementById("myDIV");
        let nodes = element.getElementsByClassName("child");
        for (let j = 0; j < nodes.length; j++) {
          nodes[j].style.backgroundColor = "RED";
        }
      }
          </script>

        <br>
        <br>          
      <p id="demo" style="color: white;"></p>    
    
    <script>
        var xValues = [100,200,300,400,500,600,700,800,900,1000];

new Chart("myChart", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{ 
      data: [860,1140,1060,1060,1070,1110,1330,2210,7830,2478],
      borderColor: "red",
      fill: false
    }, { 
      data: [1600,1700,1700,1900,2000,2700,4000,5000,6000,7000],
      borderColor: "green",      fill: false
    }, { 
      data: [300,700,2000,5000,6000,4000,2000,1000,200,100],
      borderColor: "blue",
      fill: false
    },{
        data: [500,600,2200,4000,8000,3500,1500,1550,250,150],
      borderColor: "white",
      fill: false
    },{
        data: [100,300,200,4500,800,300,500,3000,2050,1050],
      borderColor: "yellow",
      fill: false
    }
    ]
  },
  options: {
    legend: {display: false}
  }
});
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        $.ajax({
            url:"https://api.thingspeak.com/channels/1708995/feeds.json?api_key=405PTV83G7TFC7AU&results=2",
            dataType:"json",
            success:function(data){
              
                $(data.channel).each(function(value){
                  var feeds=data.feeds;
                  var fields1=0,fields2=0,fields3=0,fields4=0,fields5=0;
                  var j=1;
                  for(let i=0;i<feeds.length;i++){
                    //alert($("#").val());
                    //alert(feeds[i].field1);
                  fields1+=parseInt(feeds[i].field1);
                  fields2+=parseInt(feeds[i].field2);
                  fields3+=parseInt(feeds[i].field3);
                  fields4+=parseInt(feeds[i].field4);
                  fields5+=parseInt(feeds[i].field5);
                  
                    $("#r1_1").html(feeds[0].field1+"%");
                    $("#r1_2").html(feeds[0].field2+"%");
                    $("#r1_3").html(feeds[0].field3+"%");
                    $("#r1_4").html(feeds[0].field4+"%");
                    $("#r1_5").html(feeds[0].field5+"%");

                    $("#r2_1").html(feeds[i].field1+"%");
                    $("#r2_2").html(feeds[i].field2+"%");
                    $("#r2_3").html(feeds[i].field3+"%");
                    $("#r2_4").html(feeds[i].field4+"%");
                    $("#r2_5").html(feeds[i].field5+"%");
                  }
                  //$("#ra_1").html(fields1/feeds.length+"%");
                    //$("#ra_2").html(fields2/feeds.length+"%");
                    //$("#ra_3").html(fields3/feeds.length+"%");
                    //$("#ra_4").html(fields4/feeds.length+"%");
                    //$("#ra_5").html(fields5/feeds.length+"%");
                    

                    for(j=0;j<feeds.length;j++){
                    $("#d1").html(feeds[1].field1+"%");
                    $("#d2").html(feeds[1].field2+"%");
                    $("#d3").html(feeds[1].field3+"%");
                    $("#d4").html(feeds[1].field4+"%");
                    $("#d5").html(feeds[1].field5+"%");
                    }
                   
                    let r21 = 84;
                    let r22 = 25;
                    let r23 = 34;
                    let r24 = 65;
                    let r25 = 55;
                    let r31 = 82;
                    let r32 = 28;
                    let r33 = 30;
                    let r34 = 56;
                    let r35 = 65;
                    let r41 = 84;
                    let r42 = 26;
                    let r43 = 34;
                    let r44 = 23;
                    let r45 = 56;

                    
                    document.getElementById('r2_1').innerHTML=r21+"%";
                    document.getElementById('r2_2').innerHTML=r22+"%";
                    document.getElementById('r2_3').innerHTML=r23+"%";
                    document.getElementById('r2_4').innerHTML=r24+"%";
                    document.getElementById('r2_5').innerHTML=r25+"%";
                    document.getElementById('r3_1').innerHTML=r31+"%";
                    document.getElementById('r3_2').innerHTML=r32+"%";
                    document.getElementById('r3_3').innerHTML=r33+"%";
                    document.getElementById('r3_4').innerHTML=r34+"%";
                    document.getElementById('r3_5').innerHTML=r35+"%";
                    document.getElementById('r4_1').innerHTML=r41+"%";
                    document.getElementById('r4_2').innerHTML=r42+"%";
                    document.getElementById('r4_3').innerHTML=r43+"%";
                    document.getElementById('r4_4').innerHTML=r44+"%";
                    document.getElementById('r4_5').innerHTML=r45+"%";

                    
                    
                });                
            }
        }); 
    });   
</script>

<script>

function avg(){



  let r21 = 84;
  let r22 = 25;
  let r23 = 34;
  let r31 = 82;
  let r32 = 28;
  let r33 = 30;
  let r41 = 84;
  let r42 = 26;
  let r43 = 34;

var a1 = (r21+r22+r23)/3;
var a2 = (r31+r32+r33)/3;
var a3 = (r41+r42+r43)/3;
  

                      

  document.getElementById('ra_1').innerHTML = a1+"%";
  document.getElementById('ra_2').innerHTML = a2+"%";
  document.getElementById('ra_3').innerHTML = a3+"%";
  document.getElementById('ra_4').innerHTML = r41+"%";
  document.getElementById('ra_5').innerHTML = r23+"%";
  }
</script>
    
    
</body>
</html>
</body>
</html>